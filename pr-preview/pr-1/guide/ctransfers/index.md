[{"bookPath":"guide","title":"What do the different kinds of consensus transfers mean? publish, pay, race, fork, parallelReduce?","titleId":"guide-ctransfers","hasOtp":true,"hasPageHeader":true},"<p>\n  <i id=\"p_0\" class=\"pid\"></i>A fundamental concept in Reach is that the application starts in a detached birds-eye perspective called a step where each of the participants are acting completely independently.\n  These independent steps are punctuated by consensus transfers which cause all of the participants to come together and agree on the computation, which is called a consensus step.<a href=\"#p_0\" class=\"pid\">0</a>\n</p>\n<div class=\"note\">\n  <p><i id=\"p_1\" class=\"pid\"></i>These consensus steps are what happen \"on-chain\" and are executed by a so-called \"smart contract\".<a href=\"#p_1\" class=\"pid\">1</a></p>\n</div>\n<p>\n  <i id=\"p_2\" class=\"pid\"></i>There are many ways to perform a consensus transfer in Reach and each is used for different reasons.\n  The variety can feel a bit bewildering for new users, but here is an intuitive guide to help you decide which you need for any given situation.<a href=\"#p_2\" class=\"pid\">2</a>\n</p>\n<h2 id=\"is-a-single-participant-responsible-for-the-transfer\" class=\"refHeader\">Is a single participant responsible for the transfer?<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#is-a-single-participant-responsible-for-the-transfer\"><span class=\"icon icon-link\"></span></a></h2>\n<p>\n  <i id=\"p_3\" class=\"pid\"></i>If the entire DApp is waiting for a single participant to act, such as when at a play the entire theatre waits in anticipation for the stage hands to draw the curtains, then you either need a <span class=\"snip\"><a href=\"/rsh/step/#rsh_pay\" title=\"rsh: pay\"><span style=\"color: var(--shiki-color-text)\">pay</span></a></span> or <span class=\"snip\"><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-color-text)\">publish</span></a></span>.\n  If the single participant is sharing information, then you need a <span class=\"snip\"><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-color-text)\">publish</span></a></span>;\n  but if they are only paying a previously known amount, then you need a <span class=\"snip\"><a href=\"/rsh/step/#rsh_pay\" title=\"rsh: pay\"><span style=\"color: var(--shiki-color-text)\">pay</span></a></span>.\n  This kind of transfer always explicitly names the party acting, as in:<a href=\"#p_3\" class=\"pid\">3</a>\n</p>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"Auctioneer.publish(openingBid);\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: var(--shiki-token-constant)\">Auctioneer</span><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-token-function)\">.publish</span></a><span style=\"color: var(--shiki-color-text)\">(openingBid);</span></li></ol></pre>\n<p><i id=\"p_4\" class=\"pid\"></i><span class=\"snip\"><a href=\"/rsh/step/#rsh_pay\" title=\"rsh: pay\"><span style=\"color: var(--shiki-color-text)\">pay</span></a></span> and <span class=\"snip\"><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-color-text)\">publish</span></a></span> without a <span class=\"snip\"><a href=\"/rsh/step/#rsh_race\" title=\"rsh: race\"><span style=\"color: var(--shiki-color-text)\">race</span></a></span> are for when one participant wants to do one thing.<a href=\"#p_4\" class=\"pid\">4</a></p>\n<h2 id=\"are-multiple-participants-able-to-cause-the-transfer-but-each-will-provide-different-data\" class=\"refHeader\">Are multiple participants able to cause the transfer, but each will provide different data?<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#are-multiple-participants-able-to-cause-the-transfer-but-each-will-provide-different-data\"><span class=\"icon icon-link\"></span></a></h2>\n<p>\n  <i id=\"p_5\" class=\"pid\"></i>If the entire DApp has a clear \"next step\", but multiple participants are able to provide the values used in that step, then you need a <span class=\"snip\"><a href=\"/rsh/step/#rsh_race\" title=\"rsh: race\"><span style=\"color: var(--shiki-color-text)\">race</span></a></span> to determine the participant used for a <span class=\"snip\"><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-color-text)\">publish</span></a></span> or <span class=\"snip\"><a href=\"/rsh/step/#rsh_pay\" title=\"rsh: pay\"><span style=\"color: var(--shiki-color-text)\">pay</span></a></span>.\n  For example, in a radio call-in contest, there is one chance for a listener to call-in first and win the prize.\n  If a participant value is participant class, then all of its actions are <span class=\"snip\"><a href=\"/rsh/step/#rsh_race\" title=\"rsh: race\"><span style=\"color: var(--shiki-color-text)\">race</span></a></span>s, because the Reach identifier does not represent a specific principal, but a member of a large class.<a href=\"#p_5\" class=\"pid\">5</a>\n</p>\n<p><i id=\"p_6\" class=\"pid\"></i><span class=\"snip\"><a href=\"/rsh/step/#rsh_race\" title=\"rsh: race\"><span style=\"color: var(--shiki-color-text)\">race</span></a></span>, and participant classes are for when many participants want to do one thing.<a href=\"#p_6\" class=\"pid\">6</a></p>\n<h2 id=\"are-there-multiple-participants-that-each-want-to-do-different-things\" class=\"refHeader\">Are there multiple participants that each want to do different things?<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#are-there-multiple-participants-that-each-want-to-do-different-things\"><span class=\"icon icon-link\"></span></a></h2>\n<p>\n  <i id=\"p_7\" class=\"pid\"></i>If the DApp doesn't have a clear next step, but multiple participants each have a different option for what the next step should be, then you need a <span class=\"snip\"><a href=\"/rsh/step/#rsh_fork\" title=\"rsh: fork\"><span style=\"color: var(--shiki-color-text)\">fork</span></a></span>.\n  For example, a sale DApp might have a buy option and a bid option where the first immediately ends the computation, while the second moves it to an auction.<a href=\"#p_7\" class=\"pid\">7</a>\n</p>\n<p><i id=\"p_8\" class=\"pid\"></i><span class=\"snip\"><a href=\"/rsh/step/#rsh_fork\" title=\"rsh: fork\"><span style=\"color: var(--shiki-color-text)\">fork</span></a></span> is for when many participants want to each do a different thing.<a href=\"#p_8\" class=\"pid\">8</a></p>\n<h2 id=\"will-these-different-things-happen-over-and-over-until-some-condition-is-met\" class=\"refHeader\">Will these different things happen over and over until some condition is met?<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#will-these-different-things-happen-over-and-over-until-some-condition-is-met\"><span class=\"icon icon-link\"></span></a></h2>\n<p>\n  <i id=\"p_9\" class=\"pid\"></i>If you are in a situation where a <span class=\"snip\"><a href=\"/rsh/step/#rsh_race\" title=\"rsh: race\"><span style=\"color: var(--shiki-color-text)\">race</span></a></span> or <span class=\"snip\"><a href=\"/rsh/step/#rsh_fork\" title=\"rsh: fork\"><span style=\"color: var(--shiki-color-text)\">fork</span></a></span> is needed, and the options are available repeatedly after small diversions, then you need a <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_parallelReduce\" title=\"rsh: parallelReduce\"><span style=\"color: var(--shiki-color-text)\">parallelReduce</span></a></span>.\n  For example, in an auction, bidders repeatedly provide new bids as they compete to be the highest bidder before a time limit is reached.<a href=\"#p_9\" class=\"pid\">9</a>\n</p>\n<h2 id=\"summary\" class=\"refHeader\">Summary<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#summary\"><span class=\"icon icon-link\"></span></a></h2>\n<p><i id=\"p_10\" class=\"pid\"></i>The main questions are:<a href=\"#p_10\" class=\"pid\">10</a></p>\n<ul>\n  <li><i id=\"p_11\" class=\"pid\"></i>How many participants can act? One or many?<a href=\"#p_11\" class=\"pid\">11</a></li>\n  <li><i id=\"p_12\" class=\"pid\"></i>How many things can be done? One or many?<a href=\"#p_12\" class=\"pid\">12</a></li>\n  <li><i id=\"p_13\" class=\"pid\"></i>How many times can this be done? Once or many?<a href=\"#p_13\" class=\"pid\">13</a></li>\n</ul>\n<p>\n  <i id=\"p_14\" class=\"pid\"></i>If it happens many times, you want <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_parallelReduce\" title=\"rsh: parallelReduce\"><span style=\"color: var(--shiki-color-text)\">parallelReduce</span></a></span>.\n  If many things could happen, you want <span class=\"snip\"><a href=\"/rsh/step/#rsh_fork\" title=\"rsh: fork\"><span style=\"color: var(--shiki-color-text)\">fork</span></a></span>.\n  If many participants can act, you want <span class=\"snip\"><a href=\"/rsh/step/#rsh_race\" title=\"rsh: race\"><span style=\"color: var(--shiki-color-text)\">race</span></a></span>.\n  Otherwise, you want <span class=\"snip\"><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-color-text)\">publish</span></a></span> or <span class=\"snip\"><a href=\"/rsh/step/#rsh_pay\" title=\"rsh: pay\"><span style=\"color: var(--shiki-color-text)\">pay</span></a></span>.<a href=\"#p_14\" class=\"pid\">14</a>\n</p>\n<div class=\"note\">\n  <p>\n    <i id=\"p_15\" class=\"pid\"></i>The above article uses the word \"need\" when talking about <span class=\"snip\"><a href=\"/rsh/step/#rsh_fork\" title=\"rsh: fork\"><span style=\"color: var(--shiki-color-text)\">fork</span></a></span> and <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_parallelReduce\" title=\"rsh: parallelReduce\"><span style=\"color: var(--shiki-color-text)\">parallelReduce</span></a></span>, but actually you never need these, because they are just abbreviations of particular patterns of using the other features.\n    <span class=\"snip\"><a href=\"/rsh/step/#rsh_fork\" title=\"rsh: fork\"><span style=\"color: var(--shiki-color-text)\">fork</span></a></span> works by having each participant <span class=\"snip\"><a href=\"/rsh/step/#rsh_race\" title=\"rsh: race\"><span style=\"color: var(--shiki-color-text)\">race</span></a></span> to provide a <span class=\"snip\"><a href=\"/rsh/compute/#rsh_Data\" title=\"rsh: Data\"><span style=\"color: var(--shiki-color-text)\">Data</span></a></span> instance, where the single consensus step does a case analysis on the <span class=\"snip\"><a href=\"/rsh/compute/#rsh_Data\" title=\"rsh: Data\"><span style=\"color: var(--shiki-color-text)\">Data</span></a></span> to determine which code to run.\n    Similarly, <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_parallelReduce\" title=\"rsh: parallelReduce\"><span style=\"color: var(--shiki-color-text)\">parallelReduce</span></a></span> is just an abbreviation of a <span class=\"snip\"><a href=\"/rsh/step/#rsh_fork\" title=\"rsh: fork\"><span style=\"color: var(--shiki-color-text)\">fork</span></a></span> within a <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_while\" title=\"rsh: while\"><span style=\"color: var(--shiki-token-keyword)\">while</span></a></span> loop.<a href=\"#p_15\" class=\"pid\">15</a>\n  </p>\n</div>","<ul><li class=\"dynamic\">\n    <a href=\"#guide-ctransfers\">What do the different kinds of consensus transfers mean? <code>publish</code>, <code>pay</code>, <code>race</code>, <code>fork</code>, <code>parallelReduce</code>?</a>\n    <ul class=\"dynamic\">\n      <li class=\"dynamic\"><a href=\"#is-a-single-participant-responsible-for-the-transfer\">Is a single participant responsible for the transfer?</a></li>\n      <li class=\"dynamic\"><a href=\"#are-multiple-participants-able-to-cause-the-transfer-but-each-will-provide-different-data\">Are multiple participants able to cause the transfer, but each will provide different data?</a></li>\n      <li class=\"dynamic\"><a href=\"#are-there-multiple-participants-that-each-want-to-do-different-things\">Are there multiple participants that each want to do different things?</a></li>\n      <li class=\"dynamic\"><a href=\"#will-these-different-things-happen-over-and-over-until-some-condition-is-met\">Will these different things happen over and over until some condition is met?</a></li>\n      <li class=\"dynamic\"><a href=\"#summary\">Summary</a></li>\n    </ul>\n  </li></ul>"]